<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Persalinan - Lullaby.eca</title>
    <style>
        /* CSS DASAR - TEMA PEACH / SALMON SOFT */
        body { font-family: 'Segoe UI', Arial, sans-serif; line-height: 1.6; margin: 0; padding: 0; color: #333; background-color: #fff5f2; } /* Latar belakang peach sangat muda */
        header { background: #ffab91; color: white; padding: 1.5rem; text-align: center; } /* Warna Salmon Soft */
        
        /* Navigasi Responsif */
        nav { background: #f48a6b; padding: 0.8rem; text-align: center; position: sticky; top: 0; z-index: 1000; }
        nav a { color: white; margin: 0 8px; text-decoration: none; font-weight: bold; font-size: 0.85rem; display: inline-block; }
        
        .container { padding: 15px; max-width: 900px; margin: auto; }
        .card { border: none; padding: 20px; border-radius: 15px; margin-bottom: 20px; background: white; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        h2 { color: #d87051; border-left: 5px solid #ffab91; padding-left: 10px; margin-top: 0; margin-bottom: 15px; font-size: 1.3rem; }
        
        /* Grid System untuk Ikon */
        .grid-container { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); 
            gap: 15px; 
            margin-top: 15px; 
        }
        
        .grid-item { text-align: center; padding: 15px; border: 1px solid #ffe0d6; border-radius: 12px; background: #fffaf9; transition: 0.3s; }
        .grid-item:hover { transform: translateY(-5px); box-shadow: 0 5px 10px rgba(0,0,0,0.1); }
        .grid-item img { width: 60px; height: 60px; margin-bottom: 10px; }
        .grid-item b { display: block; color: #d87051; font-size: 0.9rem; margin-bottom: 5px; }
        .grid-item p { font-size: 0.8rem; margin: 0; color: #555; }

        .highlight-box { background: #fff3e0; border-left: 5px solid #ffab91; padding: 15px; border-radius: 8px; margin-top: 10px; }
        
        footer { text-align: center; padding: 20px; background: #5d4037; color: white; margin-top: 30px; font-size: 0.8rem; }

        /* RESPONSIVE UNTUK HP */
        @media (max-width: 600px) {
            header h1 { font-size: 1.5rem; }
            nav a { margin: 0 4px; font-size: 0.7rem; }
            .grid-container { grid-template-columns: repeat(2, 1fr); }
            .card { padding: 15px; }
            h2 { font-size: 1.1rem; }
        }
        /* Gaya Ceklist Lucu & Nomor Darurat */
        .checklist-container { list-style: none; padding: 0; }
        .checklist-item { 
            background: #fffafa; 
            margin-bottom: 8px; 
            padding: 12px; 
            border-radius: 12px; 
            border: 1px dashed #ffab91; 
            display: flex; 
            align-items: center;
        }
        .checklist-item input[type="checkbox"] { 
            margin-right: 15px; 
            transform: scale(1.3); 
            accent-color: #ffab91; 
        }
        .emergency-btn {
            display: block;
            background: #e53e3e;
            color: white;
            text-align: center;
            padding: 15px;
            border-radius: 12px;
            text-decoration: none;
            font-weight: bold;
            font-size: 1.1rem;
            margin-top: 10px;
            box-shadow: 0 4px 10px rgba(229, 62, 62, 0.3);
            border: none;
            width: 100%;
            cursor: pointer;
        }
        .emergency-btn:hover { background: #c53030; }
        .maps-btn {
            display: block;
            background: #4caf50;
            color: white;
            text-align: center;
            padding: 12px;
            border-radius: 12px;
            text-decoration: none;
            font-weight: bold;
            margin-top: 10px;
        }
    </style>
</head>
<body>

<header>
    <h1>Menyambut Buah Hati</h1>
    <p>Edukasi Persalinan Aman dan Nyaman</p>
</header>

<nav>
    <a href="index.html">Beranda</a>
    <a href="kehamilan.html">Kehamilan</a>
    <a href="persalinan.html">Persalinan</a>
    <a href="nifas.html">Nifas</a>
    <a href="bbl.html">Bayi Baru Lahir</a>
    <a href="kb.html">KB</a>
    <a href="jurnal.html">Jurnal Kesehatan</a>
    <a href="tanya ibu.html">Lulleca AI</a>
	 <a href="gizi.html">Lulleca Gizi</a>
</nav>

<div class="container">

    <div class="card">
        <h2>Tanda-Tanda Persalinan</h2>
        <p>Ibu dan keluarga harus waspada jika muncul tanda-tanda berikut:</p>
        <div class="grid-container">
            <div class="grid-item">
                <img src="his_persalinan.png" alt="His">
                <b>Kontraksi (His)</b>
                <p>Mulas yang semakin kuat, sering, dan teratur.</p>
            </div>
            <div class="grid-item">
                <img src="bloodslym_persalinan.png" alt="Show">
                <b>Lendir Darah</b>
                <p>Keluarnya lendir bercampur darah (bloody show).</p>
            </div>
            <div class="grid-item">
                <img src="ketuban_persalinan.png" alt="Ketuban">
                <b>Pecah Ketuban</b>
                <p>Keluarnya air ketuban dari jalan lahir.</p>
            </div>
            <div class="grid-item">
                <img src="cervix_persalinan.png" alt="Pembukaan">
                <b>Pembukaan</b>
                <p>Adanya pembukaan serviks (hasil cek bidan).</p>
            </div>
        </div>
    </div>

    <div class="card">
        <h2>Tahapan Persalinan (Kala I - IV)</h2>
        <p>Berdasarkan standar asuhan, persalinan dibagi menjadi 4 tahap penting:</p>
        
        <div class="highlight-box">
            <b>Kala I (Pembukaan):</b> Dimulai dari kontraksi teratur sampai pembukaan lengkap (10 cm). Pada primigravida biasanya berlangsung 12 jam.
        </div>
        
        <div class="highlight-box" style="border-left-color: #81c784;">
            <b>Kala II (Pengeluaran Bayi):</b> Dimulai dari pembukaan lengkap sampai bayi lahir. Ibu akan merasa ingin meneran seperti ingin BAB.
        </div>

        <div class="highlight-box" style="border-left-color: #64b5f6;">
            <b>Kala III (Pengeluaran Plasenta):</b> Dimulai setelah bayi lahir sampai plasenta (ari-ari) lahir lengkap. Biasanya berlangsung 5-30 menit.
        </div>

        <div class="highlight-box" style="border-left-color: #ba68c8;">
            <b>Kala IV (Observasi):</b> Masa 2 jam setelah plasenta lahir. Bidan akan memantau perdarahan, kontraksi rahim, dan keadaan umum ibu.
        </div>
    </div>

    <div class="card">
        <h2>Tips Persalinan Nyaman</h2>
        <div class="grid-container">
            <div class="grid-item">
                <img src="https://cdn-icons-png.flaticon.com/512/3588/3588643.png">
                <b>Atur Napas</b>
                <p>Tarik napas panjang dari hidung, buang perlahan. Tidak mengeluarkan suara saat meneran dan membuka mata melihat ke arah perut seperti sedang BAB</p>
            </div>
            <div class="grid-item">
                <img src="nutisi_persalinan.png">
                <b>Makan & Minum</b>
                <p>Cukupi energi ibu di sela-sela kontraksi.</p>
            </div>
            <div class="grid-item">
                <img src="pendamping_persalinan.png">
                <b>Pendamping</b>
                <p>Dukungan suami/keluarga bikin ibu lebih tenang.</p>
            </div>
        </div>
    </div>

  <div class="card">
    <h2>üéÄ Ceklist Persiapan Persalinan</h2>
    <p style="font-size: 0.85rem; color: #d87051;"><i>"Yuk, cek apa saja yang sudah masuk tas, Bu!"</i></p>
    
    <ul class="checklist-container" id="listPersiapan">
        <li class="checklist-item"><input type="checkbox" value="Buku KIA"> üìñ Buku KIA (Jangan sampai ketinggalan!)</li>
        <li class="checklist-item"><input type="checkbox" value="Dokumen KTP/BPJS"> üí≥ KTP, Kartu BPJS & Fotokopinya</li>
        <li class="checklist-item"><input type="checkbox" value="Baju Ibu"> üëï Baju Ganti Ibu (Bukaan depan/Kancing)</li>
        <li class="checklist-item"><input type="checkbox" value="Alat Mandi"> üßº Alat Mandi (Sabun, Gigi, Sikat)</li>
        <li class="checklist-item"><input type="checkbox" value="Pakaian Bayi"> üë∂ Pakaian Bayi, Bedong, Topi & Sarung Tangan</li>
        <li class="checklist-item"><input type="checkbox" value="Pembalut Ibu"> üß∑ Pembalut Khusus Ibu Melahirkan</li>
        <li class="checklist-item"><input type="checkbox" value="Minyak Telon"> üß¥ Minyak Telon & Perlengkapan Bayi</li>
        <li class="checklist-item"><input type="checkbox" value="Calon Pendonor"> ü©∏ Sudah ada Calon Pendonor Darah?</li>
        <li class="checklist-item"><input type="checkbox" value="Kendaraan"> üöó Kendaraan yang siap antar jemput</li>
    </ul>

    <button onclick="resetChecklist()" style="width: 100%; background: #fff; color: #d87051; border: 1px solid #ffab91; padding: 10px; border-radius: 12px; margin-top: 10px; cursor: pointer; font-size: 0.8rem; font-weight: bold;">üîÑ Reset Checklist Barang</button>
</div>
<div class="card" style="border: 2px solid #f48a6b;">
        <h2>üìù Input Data Persalinan</h2>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
            <div>
                <label style="font-size: 0.75rem; font-weight: bold;">Tanggal & Jam Lahir:</label>
                <input type="datetime-local" id="tglLahir" style="width: 100%; padding: 8px; margin: 5px 0; border: 1px solid #ffab91; border-radius: 5px; box-sizing: border-box;">
            </div>
            <div>
                <label style="font-size: 0.75rem; font-weight: bold;">UK saat Lahir (Mgg):</label>
                <input type="number" id="ukLahir" placeholder="Mgg" style="width: 100%; padding: 8px; margin: 5px 0; border: 1px solid #ffab91; border-radius: 5px; box-sizing: border-box;">
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px;">
            <input type="number" id="bbBayi" placeholder="Berat Badan (gram)" style="width: 100%; padding: 8px; border: 1px solid #ffab91; border-radius: 5px;">
            <input type="number" id="pbBayi" placeholder="Panjang Badan (cm)" style="width: 100%; padding: 8px; border: 1px solid #ffab91; border-radius: 5px;">
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px;">
            <input type="number" id="ldBayi" placeholder="Lingkar Dada (cm)" style="width: 100%; padding: 8px; border: 1px solid #ffab91; border-radius: 5px;">
            <input type="number" id="lpBayi" placeholder="Lingkar Perut (cm)" style="width: 100%; padding: 8px; border: 1px solid #ffab91; border-radius: 5px;">
        </div>

       <button class="emergency-btn" style="background: #4caf50; margin-top: 15px;" onclick="prosesDataLahir()">Simpan & Buat Jadwal Kunjungan</button>


        
<div id="hasilLahir" style="display: none; margin-top: 15px; padding: 15px; border-radius: 10px; background: #fff5f2; border: 1px solid #ffab91; font-size: 0.85rem;">
</div>
    </div>

    <div class="card" style="border: 2px solid #e53e3e;">
        <h2 style="color: #e53e3e; border-left-color: #e53e3e;">üÜò Keadaan Darurat</h2>
        <p style="font-size: 0.85rem;">Klik tombol di bawah ini untuk bantuan cepat:</p>
        
        <button onclick="panggilAmbulans()" class="emergency-btn">üìû Hubungi Ambulans / Puskesmas</button>
        
        <a href="https://www.google.com/maps/search/puskesmas+terdekat" target="_blank" class="maps-btn">üìç Cek Rute & Jarak ke Puskesmas</a>
        
        <div class="highlight-box" style="background: #fff5f5; font-size: 0.8rem; margin-top: 15px;">
            <b>Tips:</b> Pastikan bensin kendaraan selalu terisi penuh dan nomor telepon penting sudah disimpan di kontak HP suami.
        </div>
    </div>
	
	
</div>

<footer>
    <b>Kaiyisah Nadiya Hafizah</b><br>
    Asuhan Kebidanan Komprehensif di Puskesmas Simpang Rimba<br>
    Lullaby.eca 2026
</footer>


<script>

// 1. KONFIGURASI TELEGRAM
const TELEGRAM_TOKEN = "8151365194:AAFMl_JKjNFVTvo_8sJvhuieE1HnXZRaySc"; 
const TELEGRAM_CHAT_ID = "6435649470"; 

// 2. AMBIL DATA IDENTITAS (PASTIKAN KUNCI LOCALSTORAGE SESUAI SAAT LOGIN)
const namaUser = localStorage.getItem('user_nama') || "Bunda Tanpa Nama";
const waUser = localStorage.getItem('user_wa') || "Tidak ada No WA";

// 3. FUNGSI UTAMA KIRIM LAPORAN (SATU PINTU)
function kirimLaporan(teksDetail) {
    const pesanLengkap = `‚úÖ <b>LAPORAN LULLABY.ECA</b>\n` +
                         `----------------------------\n` +
                         `üë§ <b>Nama:</b> ${namaUser}\n` +
                         `üì± <b>WA:</b> ${waUser}\n` +
                         `üìù <b>Info:</b>\n${teksDetail}\n` +
                         `‚è∞ <b>Waktu:</b> ${new Date().toLocaleString('id-ID')}\n` +
                         `----------------------------`;
    
    const url = `https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage?chat_id=${TELEGRAM_CHAT_ID}&text=${encodeURIComponent(pesanLengkap)}&parse_mode=html`;
    
    fetch(url)
        .then(res => { if(res.ok) console.log("Telegram Sent!"); })
        .catch(err => console.error("Error Telegram:", err));
}

// 4. FUNGSI SAAT HALAMAN DIBUKA
window.onload = function() {
    // Load Data Persalinan jika sudah ada
    const savedData = localStorage.getItem('fullDataPersalinan');
    if (savedData) {
        const data = JSON.parse(savedData);
        document.getElementById('tglLahir').value = data.tgl || "";
        document.getElementById('ukLahir').value = data.uk || "";
        document.getElementById('bbBayi').value = data.bb || "";
        document.getElementById('pbBayi').value = data.pb || "";
        document.getElementById('ldBayi').value = data.ld || "";
        document.getElementById('lpBayi').value = data.lp || "";
        
        kunciInputPersalinan(true);
        tampilkanRingkasan(new Date(data.tgl), data.uk, data.bb, data.pb, data.ld, data.lp);
    }
    loadChecklist(); // Jalankan fungsi checklist
};

// 5. PROSES DATA PERSALINAN
function prosesDataLahir() {
    const tgl = document.getElementById('tglLahir').value;
    const uk = document.getElementById('ukLahir').value;
    const bb = document.getElementById('bbBayi').value;
    const pb = document.getElementById('pbBayi').value;
    const ld = document.getElementById('ldBayi').value;
    const lp = document.getElementById('lpBayi').value;

    if(!tgl || !uk || !bb || !pb) {
        alert("Mohon lengkapi data kelahiran terlebih dahulu.");
        return;
    }

    const dataPersalinan = { tgl, uk, bb, pb, ld, lp };
    localStorage.setItem('tglLahirPasien', tgl); 
    localStorage.setItem('fullDataPersalinan', JSON.stringify(dataPersalinan));

    kunciInputPersalinan(true);
    tampilkanRingkasan(new Date(tgl), uk, bb, pb, ld, lp);

    // Kirim Laporan ke Telegram
    const detail = `üë∂ <b>DATA KELAHIRAN BAYI</b>\n` +
                   `- Tgl: ${tgl.replace('T', ' ')}\n` +
                   `- UK: ${uk} Mgg\n` +
                   `- BB: ${bb}g | PB: ${pb}cm\n` +
                   `- LD: ${ld}cm | LP: ${lp}cm`;
    kirimLaporan(detail);
    alert("Data persalinan berhasil dikirim!");
}

function kunciInputPersalinan(status) {
    const inputs = ['tglLahir', 'ukLahir', 'bbBayi', 'pbBayi', 'ldBayi', 'lpBayi'];
    inputs.forEach(id => { if(document.getElementById(id)) document.getElementById(id).disabled = status; });
    const btnSimpan = document.querySelector("button[onclick='prosesDataLahir()']");
    if (btnSimpan) btnSimpan.style.display = status ? "none" : "block";
}

function tampilkanRingkasan(tglLahir, uk, bb, pb, ld, lp) {
    const kf = (hari) => {
        let d = new Date(tglLahir);
        d.setDate(d.getDate() + hari);
        return format(d);
    };

    const res = document.getElementById('hasilLahir');
    res.style.display = "block";
    res.innerHTML = `
        <div style="text-align:center; margin-bottom:10px;"><b>üéâ DATA BAYI AKTIF</b></div>
        <table style="width:100%; font-size:0.8rem;">
            <tr><td>Tgl Lahir</td><td>: ${format(tglLahir)}</td></tr>
            <tr><td>BB / PB</td><td>: ${bb}g / ${pb}cm</td></tr>
        </table>
        <hr style="border:0.5px dashed #ffab91">
        <b>üóìÔ∏è JADWAL KUNJUNGAN:</b><br>
        <div style="font-size:0.8rem;">
            1. KF1/KN1: ${kf(0)}<br>
            2. KF2/KN2: ${kf(3)}<br>
            3. KF3/KN3: ${kf(8)}<br>
            4. KF4: ${kf(29)}
        </div>
    `;
}

// 6. FUNGSI CEKLIST (DENGAN LAPORAN OTOMATIS)
function loadChecklist() {
    const saved = JSON.parse(localStorage.getItem('ceklistPersalinan')) || [];
    const checkboxes = document.querySelectorAll('.checklist-item input[type="checkbox"]');
    
    checkboxes.forEach((cb, index) => {
        if (saved.includes(index)) cb.checked = true;

        cb.onchange = function() {
            // Update LocalStorage
            const boxes = document.querySelectorAll('.checklist-item input[type="checkbox"]');
            let dataKeceklis = [];
            boxes.forEach((box, i) => { if (box.checked) dataKeceklis.push(i); });
            localStorage.setItem('ceklistPersalinan', JSON.stringify(dataKeceklis));

            // Kirim Laporan saat dicentang/dilepas
            const itemText = this.parentElement.innerText.trim().substring(2); // Hapus emoji di depan teks
            const status = this.checked ? "‚úÖ DISIAPKAN" : "‚ùå BATAL SIAP";
            kirimLaporan(`üéí <b>TAS BERSALIN:</b>\nItem: ${itemText}\nStatus: ${status}`);
        };
    });
}

function resetChecklist() {
    if (confirm("Ibu ingin mengulang daftar persiapan dari awal?")) {
        localStorage.removeItem('ceklistPersalinan');
        kirimLaporan("üîÑ <b>RESET CEKLIST</b>\nIbu mengosongkan semua daftar tas bersalin.");
        location.reload();
    }
}

// 7. EMERGENCY & UTILITY
function panggilAmbulans() { 
    kirimLaporan("üö® <b>EMERGENCY!</b>\nBunda menekan tombol panggil ambulans/Puskesmas.");
    window.location.href = "tel:087765736200"; 
}

function format(date) {
    return new Intl.DateTimeFormat('id-ID', {
        day: 'numeric', month: 'short', year: 'numeric', hour: '2-digit', minute: '2-digit'
    }).format(date);
}
</script>
